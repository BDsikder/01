<!-- ржЕржмрж╢рзНржпржЗ, ржЖржкржирж╛рж░ ржЕржирзБрж░рзЛржз ржЕржирзБржпрж╛рзЯрзА рж╕ржорзНржкрзВрж░рзНржг ржХрзЛржбржЯрж┐ржХрзЗ **рзлржЯрж┐ ржЖрж▓рж╛ржжрж╛ ржлрж╛ржЗрж▓рзЗ** ржнрж╛ржЧ ржХрж░рж╛ рж╣рзЯрзЗржЫрзЗ: `index.html`, `style.css`, `script.js`, `manifest.json`, ржПржмржВ `sw.js`ред

ржирж┐ржЪрзЗ ржлрж╛ржЗрж▓ржЧрзБрж▓рзЛ ржжрзЗржУрзЯрж╛ рж╣рж▓рзЛред ржЖржкржирж┐ ржЖржкржирж╛рж░ ржкрзНрж░ржЬрзЗржХрзНржЯ ржлрзЛрж▓рзНржбрж╛рж░рзЗ ржПржЗ ржирж╛ржорзЗ ржлрж╛ржЗрж▓ржЧрзБрж▓рзЛ рждрзИрж░рж┐ ржХрж░рзЗ ржХрзЛржбржЧрзБрж▓рзЛ ржкрзЗрж╕рзНржЯ ржХрж░рзБржиред

### 1. index.html
ржПржЗ ржлрж╛ржЗрж▓рзЗ ржорзВрж▓ рж╕рзНржЯрзНрж░рж╛ржХржЪрж╛рж░ ржПржмржВ ржПржХрзНрж╕ржЯрж╛рж░рзНржирж╛рж▓ рж▓рж┐ржВржХржЧрзБрж▓рзЛ ржпрзБржХрзНржд ржХрж░рж╛ рж╣рзЯрзЗржЫрзЗред

```html -->
<!DOCTYPE html>
<html lang="bn">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>BISNU IoT ржбрж┐ржнрж╛ржЗрж╕ ржХржирзНржЯрзНрж░рзЛрж▓ ржкрзНржпрж╛ржирзЗрж▓</title>
  
  <!-- PWA Manifest Link -->
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#2c3e50">
  <link rel="apple-touch-icon" href="Bisnu.png">

  <!-- External CSS Link -->
  <link rel="stylesheet" href="style.css">

  <!-- External Libraries -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Sortable/1.15.0/Sortable.min.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Titillium+Web:wght@300;400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body class="bg-0">

<!-- рж▓ржХ рж╕рзНржХрзНрж░рж┐ржи -->
<div class="login-container" id="login-screen">
  <div class="login-particles" id="particles"></div>
  <div class="login-logo-container">
    <img src="Bisnu.png" class="login-logo" alt="BISNU IoT Logo">
    <div class="login-logo-ring"></div>
    <div class="login-logo-ring"></div>
    <div class="login-logo-ring"></div>
  </div>
  
  <div class="login-box form-active" id="login-box">
    <div class="login-box-inner">
      <h2>BISNU IoT ржХржирзНржЯрзНрж░рзЛрж▓ ржкрзНржпрж╛ржирзЗрж▓</h2>
      <div class="input-group"> <input type="email" id="email" placeholder="ржЗржорзЗрж▓ рж▓рж┐ржЦрзБржи" autocomplete="email"> </div>
      <div class="input-group"> <input type="password" id="password" placeholder="ржкрж╛рж╕ржУржпрж╝рж╛рж░рзНржб рж▓рж┐ржЦрзБржи" autocomplete="current-password"> </div>
      <button class="action-btn" onclick="loginWithFirebase()">рж▓ржЧржЗржи ржХрж░рзБржи</button>
      <div class="error-message" id="login-error"></div>
      <div class="form-switcher"> ржЖржкржирж╛рж░ ржХрзЛржирзЛ ржПржХрж╛ржЙржирзНржЯ ржирзЗржЗ? <a onclick="openRegistrationSecurityModal()">рж░рзЗржЬрж┐рж╕рзНржЯрж╛рж░ ржХрж░рзБржи</a> </div>
    </div>
  </div>

  <div class="registration-box" id="registration-box">
    <div class="login-box-inner">
      <h2>ржирждрзБржи ржПржХрж╛ржЙржирзНржЯ рждрзИрж░рж┐ ржХрж░рзБржи</h2>
      <div class="input-group"> <input type="text" id="register-username" placeholder="ржмрзНржпржмрж╣рж╛рж░ржХрж╛рж░рзАрж░ ржирж╛ржо" autocomplete="username"> </div>
      <div class="input-group"> <input type="email" id="register-email" placeholder="ржЗржорзЗрж▓ рж▓рж┐ржЦрзБржи" autocomplete="email"> </div>
      <div class="input-group"> <input type="password" id="register-password" placeholder="ржкрж╛рж╕ржУржпрж╝рж╛рж░рзНржб рж▓рж┐ржЦрзБржи" autocomplete="new-password"> </div>
      <div class="input-group"> <input type="password" id="confirm-password" placeholder="ржкрж╛рж╕ржУржпрж╝рж╛рж░рзНржб ржирж┐рж╢рзНржЪрж┐ржд ржХрж░рзБржи" autocomplete="new-password"> </div>
      <button class="action-btn" onclick="registerWithFirebase()">рж░рзЗржЬрж┐рж╕рзНржЯрж╛рж░ ржХрж░рзБржи</button>
      <div class="error-message" id="register-error"></div>
      <div class="form-switcher"> ржЗрждрж┐ржоржзрзНржпрзЗ ржПржХрж╛ржЙржирзНржЯ ржЖржЫрзЗ? <a onclick="toggleForms()">рж▓ржЧржЗржи ржХрж░рзБржи</a> </div>
    </div>
  </div>
</div>

<!-- ржорзВрж▓ ржЕрзНржпрж╛ржкрзНрж▓рж┐ржХрзЗрж╢ржи -->
<div id="app">
  <header class="dashboard-header">
    <div class="app-logo-container">
      <img src="Bisnu.png" class="app-logo" alt="BISNU IoT Logo">
      <div class="app-logo-ring"></div>
      <div class="app-logo-ring"></div>
      <div class="app-logo-ring"></div>
    </div>
    <h1 class="dashboard-title">IoT ржбрж┐ржнрж╛ржЗрж╕ ржоржирж┐ржЯрж░рж┐ржВ рж╕рж┐рж╕рзНржЯрзЗржо</h1>
    <div class="header-controls">
      <label class="theme-toggle">
        <input type="checkbox" id="theme-toggle">
        <span class="theme-slider"></span>
        <span class="theme-icon sun-icon">тШАя╕П</span>
        <span class="theme-icon moon-icon">ЁЯМЩ</span>
      </label>
      <button id="toggle-sort-btn" class="pro-btn sort-lock-btn" onclick="toggleTabSorting()"> <i class="fas fa-lock"></i> рж╕рж╛ржЬрж╛ржирзЛ рж▓ржХ ржХрж░рзБржи </button>
      <button id="notification-btn" class="pro-btn notification-btn" onclick="requestNotificationPermission()">ЁЯФФ ржирзЛржЯрж┐ржлрж┐ржХрзЗрж╢ржи ржЪрж╛рж▓рзБ ржХрж░рзБржи</button>
      <button class="pro-btn background-btn" onclick="changeBackground()">ЁЯЦ╝я╕П ржмрзНржпрж╛ржХржЧрзНрж░рж╛ржЙржирзНржб</button>
      <button class="pro-btn logout-btn" onclick="logout()">рж▓ржЧржЖржЙржЯ</button>
    </div>
  </header>
  
  <nav class="nav-tabs" id="nav-tabs-container">
    <div class="nav-tab" onclick="showPage('page1')" data-tab-id="page1"><i class="fas fa-server"></i> ржбрж┐ржнрж╛ржЗрж╕ рзз</div>
    <div class="nav-tab" onclick="showPage('page2')" data-tab-id="page2"><i class="fas fa-server"></i> ржбрж┐ржнрж╛ржЗрж╕ рзи</div>
    <div class="nav-tab" onclick="showPage('page3')" data-tab-id="page3"><i class="fas fa-server"></i> ржбрж┐ржнрж╛ржЗрж╕ рзй</div>
    <div class="nav-tab" onclick="showPage('page4')" data-tab-id="page4"><i class="fas fa-server"></i> ржбрж┐ржнрж╛ржЗрж╕ рзк</div>
    <div class="nav-tab" onclick="showPage('page5')" data-tab-id="page5"><i class="fas fa-bolt"></i> ржПржирж╛рж░рзНржЬрж┐ ржоржирж┐ржЯрж░</div>
    <div class="nav-tab" onclick="showPage('page6')" data-tab-id="page6"><i class="fas fa-chart-line"></i> ржПржбржнрж╛ржирзНрж╕ржб ржЧрзНрж░рж╛ржл</div>
    <div class="nav-tab" onclick="showPage('page7')" data-tab-id="page7"><i class="fas fa-file-alt"></i> Diagram Note File</div>
    <div class="nav-tab" onclick="showPage('page8')" data-tab-id="page8"><i class="fas fa-sliders-h"></i> ржХржирзНржЯрзНрж░рзЛрж▓ ржкрзНржпрж╛ржирзЗрж▓</div>
    <div class="nav-tab" onclick="showPage('page9')" data-tab-id="page9"><i class="fas fa-robot"></i> ржЕржЯрзЛржорзЗрж╢ржи ржУ ржЕрзНржпрж╛рж▓рж╛рж░рзНржЯ</div>
    <div class="nav-tab" onclick="showPage('page10')" data-tab-id="page10"><i class="fas fa-history"></i> ржЕржбрж┐ржЯ рж▓ржЧ</div>
    <div class="nav-tab" onclick="showPage('page11')" data-tab-id="page11"><i class="fas fa-info-circle"></i> рж╕рж┐рж╕рзНржЯрзЗржо рж╕рзНржЯрзНржпрж╛ржЯрж╛рж╕</div>
    <div class="nav-tab" onclick="showPage('page12')" data-tab-id="page12"><i class="fas fa-project-diagram"></i> рж▓ржЬрж┐ржХ ржЧрзЗржЯ ржЗржирзНржЯрж╛рж░рж▓ржХ</div>
    <div class="nav-tab" onclick="showPage('page13')" data-tab-id="page13"><i class="fas fa-thermometer-half"></i> рждрж╛ржкржорж╛рждрзНрж░рж╛ ржоржирж┐ржЯрж░</div>
    <div class="nav-tab" id="add-new-page-btn" onclick="openAddPageModal()" data-tab-id="add-new-page-btn"> <i class="fas fa-plus"></i> ржирждрзБржи ржкрзЗржЬ </div>
  </nav>

  <!-- ржбрж┐ржнрж╛ржЗрж╕ рзз ржкрзЗржЗржЬ -->
  <main id="page1" class="device-page" data-component-id="device1_data">
    <section class="device-status-summary" id="device1-summary">
      <div class="status-item"><div class="status-count" id="d1-active-count">0</div><div class="status-label">ржПржХрзНржЯрж┐ржн</div></div>
      <div class="status-item"><div class="status-count" id="d1-inactive-count">0</div><div class="status-label">ржЗржиржПржХрзНржЯрж┐ржн</div></div>
      <div class="status-item"><div class="status-count" id="d1-warning-count">0</div><div class="status-label">рж╕рждрж░рзНржХрждрж╛</div></div>
      <div class="status-item"><div class="status-count" id="d1-total-count">0</div><div class="status-label">ржорзЛржЯ рж▓рзЛржб</div></div>
    </section>
    <section class="device-cards" id="device1-cards-container"></section>
    <div class="add-new-btn-container">
      <button class="pro-btn btn-info" onclick="addNewLoadToDevice('device1')" style="width: 100%; padding: 12px; font-size: 1rem;"><i class="fas fa-plus-circle"></i> ржирждрзБржи рж▓рзЛржб ржпрзЛржЧ ржХрж░рзБржи</button>
    </div>
    <section class="analytics-section">
      <div class="chart-container">
        <div class="section-header">
          <h3 class="section-title">ржбрж┐ржнрж╛ржЗрж╕ рзз рж╕рзНржЯрзНржпрж╛ржЯрж╛рж╕ ржЧрзНрж░рж╛ржл</h3>
          <i class="fas fa-cog path-config-icon" title="Path Configuration" onclick="openPathSelector('device1_data', event)"></i>
        </div>
        <canvas id="device1-chart"></canvas>
      </div>
      <div class="log-container"> <h3 class="section-title">ржбрж┐ржнрж╛ржЗрж╕ рзз рж▓ржЧ</h3> <div class="log-list" id="device1-logs"></div> </div>
    </section>
  </main>

  <!-- ржбрж┐ржнрж╛ржЗрж╕ рзи ржкрзЗржЗржЬ -->
  <main id="page2" class="device-page" data-component-id="device2_data">
    <section class="device-status-summary" id="device2-summary">
      <div class="status-item"><div class="status-count" id="d2-active-count">0</div><div class="status-label">ржПржХрзНржЯрж┐ржн</div></div>
      <div class="status-item"><div class="status-count" id="d2-inactive-count">0</div><div class="status-label">ржЗржиржПржХрзНржЯрж┐ржн</div></div>
      <div class="status-item"><div class="status-count" id="d2-warning-count">0</div><div class="status-label">рж╕рждрж░рзНржХрждрж╛</div></div>
      <div class="status-item"><div class="status-count" id="d2-total-count">0</div><div class="status-label">ржорзЛржЯ рж▓рзЛржб</div></div>
    </section>
    <section class="device-cards" id="device2-cards-container"></section>
    <div class="add-new-btn-container">
      <button class="pro-btn btn-info" onclick="addNewLoadToDevice('device2')" style="width: 100%; padding: 12px; font-size: 1rem;"><i class="fas fa-plus-circle"></i> ржирждрзБржи рж▓рзЛржб ржпрзЛржЧ ржХрж░рзБржи</button>
    </div>
    <section class="analytics-section">
      <div class="chart-container">
        <div class="section-header">
          <h3 class="section-title">ржбрж┐ржнрж╛ржЗрж╕ рзи рж╕рзНржЯрзНржпрж╛ржЯрж╛рж╕ ржЧрзНрж░рж╛ржл</h3>
          <i class="fas fa-cog path-config-icon" title="Path Configuration" onclick="openPathSelector('device2_data', event)"></i>
        </div>
        <canvas id="device2-chart"></canvas>
      </div>
      <div class="log-container"><h3 class="section-title">ржбрж┐ржнрж╛ржЗрж╕ рзи рж▓ржЧ</h3><div class="log-list" id="device2-logs"></div></div>
    </section>
  </main>

  <!-- ржбрж┐ржнрж╛ржЗрж╕ рзй ржкрзЗржЗржЬ -->
  <main id="page3" class="device-page" data-component-id="device3_data">
    <section class="device-status-summary" id="device3-summary">
      <div class="status-item"><div class="status-count" id="d3-active-count">0</div><div class="status-label">ржПржХрзНржЯрж┐ржн</div></div>
      <div class="status-item"><div class="status-count" id="d3-inactive-count">0</div><div class="status-label">ржЗржиржПржХрзНржЯрж┐ржн</div></div>
      <div class="status-item"><div class="status-count" id="d3-warning-count">0</div><div class="status-label">рж╕рждрж░рзНржХрждрж╛</div></div>
      <div class="status-item"><div class="status-count" id="d3-total-count">0</div><div class="status-label">ржорзЛржЯ рж▓рзЛржб</div></div>
    </section>
    <section class="device-cards" id="device3-cards-container"></section>
    <div class="add-new-btn-container">
      <button class="pro-btn btn-info" onclick="addNewLoadToDevice('device3')" style="width: 100%; padding: 12px; font-size: 1rem;"><i class="fas fa-plus-circle"></i> ржирждрзБржи рж▓рзЛржб ржпрзЛржЧ ржХрж░рзБржи</button>
    </div>
    <section class="analytics-section">
      <div class="chart-container">
        <div class="section-header">
            <h3 class="section-title">ржбрж┐ржнрж╛ржЗрж╕ рзй рж╕рзНржЯрзНржпрж╛ржЯрж╛рж╕ ржЧрзНрж░рж╛ржл</h3>
            <i class="fas fa-cog path-config-icon" title="Path Configuration" onclick="openPathSelector('device3_data', event)"></i>
        </div>
        <canvas id="device3-chart"></canvas>
      </div>
      <div class="log-container"><h3 class="section-title">ржбрж┐ржнрж╛ржЗрж╕ рзй рж▓ржЧ</h3><div class="log-list" id="device3-logs"></div></div>
    </section>
  </main>
  
  <!-- ржбрж┐ржнрж╛ржЗрж╕ рзк ржкрзЗржЗржЬ -->
  <main id="page4" class="device-page" data-component-id="device4_data">
    <section class="device-status-summary" id="device4-summary">
      <div class="status-item"><div class="status-count" id="d4-active-count">0</div><div class="status-label">ржПржХрзНржЯрж┐ржн</div></div>
      <div class="status-item"><div class="status-count" id="d4-inactive-count">0</div><div class="status-label">ржЗржиржПржХрзНржЯрж┐ржн</div></div>
      <div class="status-item"><div class="status-count" id="d4-warning-count">0</div><div class="status-label">рж╕рждрж░рзНржХрждрж╛</div></div>
      <div class="status-item"><div class="status-count" id="d4-total-count">0</div><div class="status-label">ржорзЛржЯ рж▓рзЛржб</div></div>
    </section>
    <section class="device-cards" id="device4-cards-container"></section>
    <div class="add-new-btn-container">
      <button class="pro-btn btn-info" onclick="addNewLoadToDevice('device4')" style="width: 100%; padding: 12px; font-size: 1rem;"><i class="fas fa-plus-circle"></i> ржирждрзБржи рж▓рзЛржб ржпрзЛржЧ ржХрж░рзБржи</button>
    </div>
    <section class="analytics-section">
      <div class="chart-container">
        <div class="section-header">
            <h3 class="section-title">ржбрж┐ржнрж╛ржЗрж╕ рзк рж╕рзНржЯрзНржпрж╛ржЯрж╛рж╕ ржЧрзНрж░рж╛ржл</h3>
            <i class="fas fa-cog path-config-icon" title="Path Configuration" onclick="openPathSelector('device4_data', event)"></i>
        </div>
        <canvas id="device4-chart"></canvas>
      </div>
      <div class="log-container"><h3 class="section-title">ржбрж┐ржнрж╛ржЗрж╕ рзк рж▓ржЧ</h3><div class="log-list" id="device4-logs"></div></div>
    </section>
  </main>
  
  <!-- ржПржирж╛рж░рзНржЬрж┐ ржоржирж┐ржЯрж░рж┐ржВ ржкрзЗржЗржЬ -->
  <main id="page5" class="device-page" data-component-id="energymonitoring_root">
    <section class="energy-metrics">
      <div class="energy-card voltage-card"><div class="energy-title">тЪб ржнрзЛрж▓рзНржЯрзЗржЬ</div><div class="energy-value" id="voltage-value">-- <span class="energy-unit">V</span></div></div>
      <div class="energy-card current-card"><div class="energy-title">ЁЯФМ ржХрж╛рж░рзЗржирзНржЯ</div><div class="energy-value" id="current-value">-- <span class="energy-unit">A</span></div></div>
      <div class="energy-card power-card"><div class="energy-title">ЁЯТб ржкрж╛ржУржпрж╝рж╛рж░</div><div class="energy-value" id="power-value">-- <span class="energy-unit">W</span></div></div>
      <div class="energy-card energy-card-main"><div class="energy-title">ЁЯФЛ ржПржирж╛рж░рзНржЬрж┐</div><div class="energy-value" id="energy-value">-- <span class="energy-unit">kWh</span></div></div>
      <div class="energy-card frequency-card"><div class="energy-title">тП▒я╕П ржлрзНрж░рж┐ржХрзЛржпрж╝рзЗржирзНрж╕рж┐</div><div class="energy-value" id="frequency-value">-- <span class="energy-unit">Hz</span></div></div>
      <div class="energy-card power-factor-card"><div class="energy-title">ЁЯУК ржкрж╛ржУржпрж╝рж╛рж░ ржлрзНржпрж╛ржХрзНржЯрж░</div><div class="energy-value" id="power-factor-value">-- <span class="energy-unit"></span></div></div>
      <div class="energy-card active-power-card"><div class="energy-title">ЁЯФЖ ржЕрзНржпрж╛ржХрзНржЯрж┐ржн ржкрж╛ржУржпрж╝рж╛рж░</div><div class="energy-value" id="active-power-value">-- <span class="energy-unit">W</span></div></div>
      <div class="energy-card reactive-power-card"><div class="energy-title">ЁЯМА рж░рж┐ржЕрзНржпрж╛ржХрзНржЯрж┐ржн ржкрж╛ржУржпрж╝рж╛рж░</div><div class="energy-value" id="reactive-power-value">-- <span class="energy-unit">VAR</span></div></div>
      <div class="energy-card units-card"><div class="energy-title">тЬФя╕П ржмрзНржпржмрж╣рзГржд ржЗржЙржирж┐ржЯ</div><div class="energy-value" id="units-value">-- <span class="energy-unit">Units</span></div></div>
      <div class="energy-card cost-card"><div class="energy-title">ЁЯТ░ ржжрзИржирж┐ржХ ржЦрж░ржЪ</div><div class="energy-value" id="daily-cost-value">-- <span class="energy-unit">BDT</span></div></div>
      <div class="energy-card timestamp-card"><div class="energy-title">ЁЯХТ ржЯрж╛ржЗржорж╕рзНржЯрзНржпрж╛ржорзНржк</div><div class="energy-value" id="timestamp-value" style="font-size: 1.2rem; font-weight: 500;">--</div></div>
    </section>
    <section class="intelligence-section">
      <div class="section-header">
        <h3 class="intelligence-title">ЁЯза ржЗржирзНржЯрзЗрж▓рж┐ржЬрзЗржирзНрж╕ ржЗржирж╕рж╛ржЗржЯрж╕</h3>
        <i class="fas fa-cog path-config-icon" title="Path Configuration" onclick="openPathSelector('energymonitoring_root', event)"></i>
      </div>
      <div id="anomaly-alert"><p>рж╕рж┐рж╕рзНржЯрзЗржо рж╕рзНржмрж╛ржнрж╛ржмрж┐ржХржнрж╛ржмрзЗ ржЪрж▓ржЫрзЗред ржХрзЛржирзЛ ржЕрж╕рзНржмрж╛ржнрж╛ржмрж┐ржХрждрж╛ рж╢ржирж╛ржХрзНржд рж╣ржпрж╝ржирж┐ред</p></div>
    </section>
    <section class="energy-graphs">
      <div class="graph-container"><h3 class="graph-title">ржнрзЛрж▓рзНржЯрзЗржЬ ржЯрзНрж░рзЗржирзНржб</h3><canvas id="voltage-chart"></canvas></div>
      <div class="graph-container"><h3 class="graph-title">ржХрж╛рж░рзЗржирзНржЯ ржЯрзНрж░рзЗржирзНржб</h3><canvas id="current-chart"></canvas></div>
      <div class="graph-container"><h3 class="graph-title">ржкрж╛ржУржпрж╝рж╛рж░ ржЯрзНрж░рзЗржирзНржб</h3><canvas id="power-chart"></canvas></div>
      <div class="graph-container"><h3 class="graph-title">ржПржирж╛рж░рзНржЬрж┐ ржХржиржЬрж╛ржорзНржкрж╢ржи</h3><canvas id="energy-chart"></canvas></div>
    </section>
  </main>

  <!-- ржПржбржнрж╛ржирзНрж╕ржб ржПржирж╛рж░рзНржЬрж┐ ржоржирж┐ржЯрж░рж┐ржВ ржкрзЗржЗржЬ -->
  <main id="page6" class="device-page" data-component-id="energymonitoring_history">
    <div class="time-selection">
      <button class="time-btn active" onclick="changeTimeRange(30)">рзйрзж ржорж┐ржирж┐ржЯ</button>
      <button class="time-btn" onclick="changeTimeRange(60)">рзз ржШржирзНржЯрж╛</button>
      <button class="time-btn" onclick="changeTimeRange(180)">рзй ржШржирзНржЯрж╛</button>
      <button class="time-btn" onclick="changeTimeRange(360)">рзм ржШржирзНржЯрж╛</button>
      <button class="time-btn" onclick="changeTimeRange(720)">рззрзи ржШржирзНржЯрж╛</button>
    </div>
    <div class="metric-selection">
      <div class="metric-card selected" onclick="selectMetric('voltage')"><div class="metric-title"><span class="metric-icon">тЪб</span> ржнрзЛрж▓рзНржЯрзЗржЬ</div><div class="metric-description">ржнрзЛрж▓рзНржЯрзЗржЬрзЗрж░ ржкрж░рж┐ржмрж░рзНрждржи ржкрж░рзНржпржмрзЗржХрзНрж╖ржг ржХрж░рзБржи</div></div>
      <div class="metric-card" onclick="selectMetric('current')"><div class="metric-title"><span class="metric-icon">ЁЯФМ</span> ржХрж╛рж░рзЗржирзНржЯ</div><div class="metric-description">ржХрж╛рж░рзЗржирзНржЯрзЗрж░ ржкрзНрж░ржмрж╛рж╣ ржмрж┐рж╢рзНрж▓рзЗрж╖ржг ржХрж░рзБржи</div></div>
      <div class="metric-card" onclick="selectMetric('power')"><div class="metric-title"><span class="metric-icon">ЁЯТб</span> ржкрж╛ржУржпрж╝рж╛рж░</div><div class="metric-description">ржкрж╛ржУржпрж╝рж╛рж░ ржмрзНржпржмрж╣рж╛рж░рзЗрж░ ржЯрзНрж░рзЗржирзНржб ржжрзЗржЦрзБржи</div></div>
      <div class="metric-card" onclick="selectMetric('energy')"><div class="metric-title"><span class="metric-icon">ЁЯФЛ</span> ржПржирж╛рж░рзНржЬрж┐</div><div class="metric-description">ржПржирж╛рж░рзНржЬрж┐ ржЦрж░ржЪрзЗрж░ рж╣рж┐рж╕рж╛ржм ржжрзЗржЦрзБржи</div></div>
      <div class="metric-card" onclick="selectMetric('frequency')"><div class="metric-title"><span class="metric-icon">тП▒я╕П</span> ржлрзНрж░рж┐ржХрзЛржпрж╝рзЗржирзНрж╕рж┐</div><div class="metric-description">ржлрзНрж░рж┐ржХрзЛржпрж╝рзЗржирзНрж╕рж┐рж░ рж╕рзНржерж┐рждрж┐рж╢рзАрж▓рждрж╛ ржкрж░рзАржХрзНрж╖рж╛ ржХрж░рзБржи</div></div>
      <div class="metric-card" onclick="selectMetric('powerFactor')"><div class="metric-title"><span class="metric-icon">ЁЯУК</span> ржкрж╛ржУржпрж╝рж╛рж░ ржлрзНржпрж╛ржХрзНржЯрж░</div><div class="metric-description">ржкрж╛ржУржпрж╝рж╛рж░ ржлрзНржпрж╛ржХрзНржЯрж░рзЗрж░ ржорж╛ржи ржмрж┐рж╢рзНрж▓рзЗрж╖ржг ржХрж░рзБржи</div></div>
      <div class="metric-card" onclick="selectMetric('activePower')"><div class="metric-title"><span class="metric-icon">ЁЯФЖ</span> ржЕрзНржпрж╛ржХрзНржЯрж┐ржн ржкрж╛ржУржпрж╝рж╛рж░</div><div class="metric-description">рж░рж┐ржпрж╝рзЗрж▓ ржкрж╛ржУржпрж╝рж╛рж░ ржмрзНржпржмрж╣рж╛рж░ ржжрзЗржЦрзБржи</div></div>
      <div class="metric-card" onclick="selectMetric('reactivePower')"><div class="metric-title"><span class="metric-icon">ЁЯМА</span> рж░рж┐ржЕрзНржпрж╛ржХрзНржЯрж┐ржн ржкрж╛ржУржпрж╝рж╛рж░</div><div class="metric-description">рж░рж┐ржЕрзНржпрж╛ржХрзНржЯрж┐ржн ржкрж╛ржУржпрж╝рж╛рж░ ржЯрзНрж░рзЗржирзНржб</div></div>
    </div>
    <section class="advanced-graph-container">
      <div class="graph-header">
        <h3 class="graph-title" id="advanced-graph-title">ржнрзЛрж▓рзНржЯрзЗржЬ ржЯрзНрж░рзЗржирзНржб (рзйрзж ржорж┐ржирж┐ржЯ)</h3>
        <div class="graph-controls">
          <button class="graph-btn" onclick="downloadGraphData()">ржбрж╛ржЯрж╛ ржбрж╛ржЙржирж▓рзЛржб</button>
          <button class="graph-btn" onclick="printGraph()">ржкрзНрж░рж┐ржирзНржЯ</button>
          <i class="fas fa-cog path-config-icon" title="Path Configuration" onclick="openPathSelector('energymonitoring_history', event)"></i>
        </div>
      </div>
      <canvas id="advanced-energy-chart"></canvas>
      <div class="no-data-message" id="no-data-message" style="display: none;">ржирж┐рж░рзНржмрж╛ржЪрж┐ржд рж╕ржоржпрж╝ рж░рзЗржЮрзНржЬрзЗ ржХрзЛржирзЛ ржбрж╛ржЯрж╛ ржкрж╛ржУржпрж╝рж╛ ржпрж╛ржпрж╝ржирж┐</div>
    </section>
  </main>
  
  <!-- Diagram Note File ржкрзЗржЗржЬ -->
  <main id="page7" class="device-page">
    <section class="notes-container">
      <h2 class="note-title">Diagram Note File</h2>
      <p class="note-paragraph">ржПржЗ ржкрзГрж╖рзНржарж╛ржЯрж┐ ржЖржорж╛ржжрзЗрж░ ржкрзНрж░ржХрж▓рзНржкрзЗрж░ ржЬржирзНржп ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржг ржирзЛржЯ ржПржмржВ ржбржХрзБржорзЗржирзНржЯрзЗрж╢ржи рж╕ржВрж░ржХрзНрж╖ржг ржХрж░рждрзЗ ржмрзНржпржмрж╣рзГржд рж╣ржмрзЗред ржПржЦрж╛ржирзЗ ржЖржкржирж┐ ржкрзНрж░ржХрж▓рзНржкрзЗрж░ ржмрж┐ржнрж┐ржирзНржи ржбрж╛ржпрж╝рж╛ржЧрзНрж░рж╛ржо, ржирзЛржЯ ржПржмржВ ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржг рждржерзНржп ржкрж╛ржмрзЗржи ржпрж╛ ржкрзНрж░ржХрж▓рзНржкрзЗрж░ ржЙржирзНржиржпрж╝ржи ржПржмржВ рж░ржХрзНрж╖ржгрж╛ржмрзЗржХрзНрж╖ржгрзЗрж░ ржЬржирзНржп ржкрзНрж░ржпрж╝рзЛржЬржирзАржпрж╝ред</p>
      <div class="note-letter"><div class="note-letter-title">ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржг ржирзЛржЯ #1</div><div class="note-letter-content">ржкрзНрж░ржХрж▓рзНржкрзЗрж░ рж╕рж╛рж░рзНржХрж┐ржЯ ржбрж╛ржпрж╝рж╛ржЧрзНрж░рж╛ржоржЯрж┐ ржирж┐ржЪрзЗ ржжрзЗржУржпрж╝рж╛ рж╣ржпрж╝рзЗржЫрзЗред ржжржпрж╝рж╛ ржХрж░рзЗ ржирж┐рж╢рзНржЪрж┐ржд ржХрж░рзБржи ржпрзЗ рж╕ржорж╕рзНржд рж╕ржВржпрзЛржЧ рж╕ржарж┐ржХржнрж╛ржмрзЗ ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗ ржПржмржВ ржкрзНрж░рждрж┐ржЯрж┐ ржХржорзНржкрзЛржирзЗржирзНржЯ рж╕ржарж┐ржХржнрж╛ржмрзЗ рж╕рзНржерж╛ржкржи ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗред рж╕рж╛рж░рзНржХрж┐ржЯ ржбрж╛ржпрж╝рж╛ржЧрзНрж░рж╛ржорзЗ ржХрзЛржи ржкрж░рж┐ржмрж░рзНрждржи ржкрзНрж░ржпрж╝рзЛржЬржи рж╣рж▓рзЗ ржжржпрж╝рж╛ ржХрж░рзЗ ржЯрж┐ржо рж▓рж┐ржбрж╛рж░ржХрзЗ ржЬрж╛ржирж╛ржиред</div></div>
      <div class="note-images">
        <div class="note-image" onclick="openImageModal('electrical-single-line-diagram-4.jpg', 'ржкрзНрж░ржХрж▓рзНржкрзЗрж░ рж╕рж╛рж░рзНржХрж┐ржЯ ржбрж╛ржпрж╝рж╛ржЧрзНрж░рж╛ржо')"><img src="electrical-single-line-diagram-4.jpg" alt="рж╕рж╛рж░рзНржХрж┐ржЯ ржбрж╛ржпрж╝рж╛ржЧрзНрж░рж╛ржо"><div class="note-image-caption">ржкрзНрж░ржХрж▓рзНржкрзЗрж░ рж╕рж╛рж░рзНржХрж┐ржЯ ржбрж╛ржпрж╝рж╛ржЧрзНрж░рж╛ржо</div></div>
        <div class="note-image" onclick="openImageModal('6005990.jpg', 'рж╕рж┐рж╕рзНржЯрзЗржо ржлрзНрж▓рзЛ ржЪрж╛рж░рзНржЯ')"><img src="6005990.jpg" alt="ржлрзНрж▓рзЛ ржЪрж╛рж░рзНржЯ"><div class="note-image-caption">рж╕рж┐рж╕рзНржЯрзЗржо ржлрзНрж▓рзЛ ржЪрж╛рж░рзНржЯ</div></div>
      </div>
      <h3 class="note-subtitle">ржкрзНрж░ржХрж▓рзНржкрзЗрж░ ржорзВрж▓ ржмрзИрж╢рж┐рж╖рзНржЯрзНржп</h3><p class="note-paragraph">
        1. рж░рж┐ржпрж╝рзЗрж▓-ржЯрж╛ржЗржо ржбрж┐ржнрж╛ржЗрж╕ ржоржирж┐ржЯрж░рж┐ржВ<br>2. ржПржирж╛рж░рзНржЬрж┐ ржХржиржЬрж╛ржорзНржкрж╢ржи ржЯрзНрж░рзНржпрж╛ржХрж┐ржВ<br>
        3. рж░рж┐ржорзЛржЯ ржХржирзНржЯрзНрж░рзЛрж▓ рж╕ржХрзНрж╖ржорждрж╛<br>
        4. ржбрзЗржЯрж╛ ржнрж┐ржЬрзБржпрж╝рж╛рж▓рж╛ржЗржЬрзЗрж╢ржи<br>
        5. ржорж╛рж▓рзНржЯрж┐-ржбрж┐ржнрж╛ржЗрж╕ рж╕рж╛ржкрзЛрж░рзНржЯ</p>

      <div class="note-letter"><div class="note-letter-title">ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржг ржирзЛржЯ 
        #2</div><div class="note-letter-content">рж╕рж┐рж╕рзНржЯрзЗржо ржЖржкржбрзЗржЯрзЗрж░ рж╕ржоржпрж╝ ржирж┐ржЪрзЗрж░ рж╕рждрж░рзНржХрждрж╛ржЧрзБрж▓рзЛ ржорзЗржирзЗ ржЪрж▓рзБржи:<br>- ржЖржкржбрзЗржЯ ржХрж░рж╛рж░ ржЖржЧрзЗ ржмрзНржпрж╛ржХржЖржк ржирж┐ржи<br>- ржкрзНрж░рзЛржбрж╛ржХрж╢ржи рж╕рж┐рж╕рзНржЯрзЗржорзЗ рж╕рж░рж╛рж╕рж░рж┐ ржЖржкржбрзЗржЯ ржХрж░ржмрзЗржи ржирж╛<br>- ржкрж░рж┐ржмрж░рзНрждржи ржХрж░рж╛рж░ ржЖржЧрзЗ ржЯрж┐ржорзЗрж░ рж╕рж╛ржерзЗ ржЖрж▓рзЛржЪржирж╛ ржХрж░рзБржи<br>- рж╕ржорж╕рзНржд ржкрж░рж┐ржмрж░рзНрждржи ржбржХрзБржорзЗржирзНржЯ ржХрж░рзБржи</div></div>
      <h3 class="note-subtitle">рж╕рж┐рж╕рзНржЯрзЗржо ржЖрж░рзНржХрж┐ржЯрзЗржХржЪрж╛рж░</h3><p class="note-paragraph">ржЖржорж╛ржжрзЗрж░ рж╕рж┐рж╕рзНржЯрзЗржоржЯрж┐ рждрж┐ржиржЯрж┐ ржорзВрж▓ ржЕржВрж╢ ржирж┐ржпрж╝рзЗ ржЧржарж┐ржд:<br>1. IoT ржбрж┐ржнрж╛ржЗрж╕ - ржбрж╛ржЯрж╛ ржХрж╛рж▓рзЗржХрж╢ржи ржПржмржВ ржПржХржЪрзБржпрж╝рзЗрж╢ржи<br>2. ржХрзНрж▓рж╛ржЙржб рж╕рж╛рж░рзНржнрж╛рж░ - ржбрж╛ржЯрж╛ ржкрзНрж░рж╕рзЗрж╕рж┐ржВ ржПржмржВ рж╕рзНржЯрзЛрж░рзЗржЬ<br>3. ржУржпрж╝рзЗржм ржЗржирзНржЯрж╛рж░ржлрзЗрж╕ - ржЗржЙржЬрж╛рж░ ржЗржирзНржЯрж╛рж░ржЕрзНржпрж╛ржХрж╢ржи</p>
      <div class="note-images"><div class="note-image" onclick="openImageModal('https://i.ibb.co/5KJZ0Lm/system-architecture.jpg', 'рж╕рж┐рж╕рзНржЯрзЗржо ржЖрж░рзНржХрж┐ржЯрзЗржХржЪрж╛рж░ ржбрж╛ржпрж╝рж╛ржЧрзНрж░рж╛ржо')"><img src="https://i.ibb.co/5KJZ0Lm/system-architecture.jpg" alt="рж╕рж┐рж╕рзНржЯрзЗржо ржЖрж░рзНржХрж┐ржЯрзЗржХржЪрж╛рж░"><div class="note-image-caption">рж╕рж┐рж╕рзНржЯрзЗржо ржЖрж░рзНржХрж┐ржЯрзЗржХржЪрж╛рж░ ржбрж╛ржпрж╝рж╛ржЧрзНрж░рж╛ржо</div></div></div>
      <h3 class="note-subtitle">ржнржмрж┐рж╖рзНржпрждрзЗрж░ ржЙржирзНржиржпрж╝ржи ржкрж░рж┐ржХрж▓рзНржкржирж╛</h3><p class="note-paragraph">- ржорзЛржмрж╛ржЗрж▓ ржЕрзНржпрж╛ржкрзНрж▓рж┐ржХрзЗрж╢ржи рж╕ржВржпрзЛржЬржи<br>- AI-ржнрж┐рждрзНрждрж┐ржХ ржПржирж╛рж░рзНржЬрж┐ ржЕржкрзНржЯрж┐ржорж╛ржЗржЬрзЗрж╢ржи<br>- ржорж╛рж▓рзНржЯрж┐-ржЗржЙржЬрж╛рж░ рж╕рж╛ржкрзЛрж░рзНржЯ<br>- ржЕрзНржпрж╛ржбржнрж╛ржирзНрж╕ржб рж░рж┐ржкрзЛрж░рзНржЯрж┐ржВ рж╕рж┐рж╕рзНржЯрзЗржо<br>- ржерж╛рж░рзНржб-ржкрж╛рж░рзНржЯрж┐ ржЗржирзНржЯрж┐ржЧрзНрж░рзЗрж╢ржи</p>
    </section>
  </main>

  <!-- ржХржирзНржЯрзНрж░рзЛрж▓ ржкрзНржпрж╛ржирзЗрж▓ ржкрзЗржЗржЬ -->
  <main id="page8" class="device-page">
    <section class="control-section" id="page-component-scenes" data-component-id="scenes">
      <div class="section-header">
        <h2 class="control-section-title">ржжрзГрж╢рзНржп (Scenes)</h2>
        <i class="fas fa-cog path-config-icon" title="Path Configuration" onclick="openPathSelector('scenes', event)"></i>
      </div>
      <div class="scene-buttons" id="scene-buttons-container"><button class="pro-btn create-scene-btn" onclick="openSceneModal()"><i class="fas fa-plus"></i> ржирждрзБржи ржжрзГрж╢рзНржп рждрзИрж░рж┐ ржХрж░рзБржи</button></div>
    </section>
    <div id="control-panel-container"></div>
    <div class="add-new-btn-container"><button class="pro-btn btn-info" onclick="addNewDevice()" style="width: 100%; padding: 15px; font-size: 1.2rem;"><i class="fas fa-plus-circle"></i> ржирждрзБржи ржбрж┐ржнрж╛ржЗрж╕ ржпрзЛржЧ ржХрж░рзБржи</button></div>
  </main>

  <!-- ржЕржЯрзЛржорзЗрж╢ржи ржУ ржЕрзНржпрж╛рж▓рж╛рж░рзНржЯ ржкрзЗржЗржЬ -->
  <main id="page9" class="device-page" data-component-id="automation_rules">
    <div class="automation-grid">
      <div class="automation-container">
        <div class="section-header">
          <h2 class="section-title">ржирждрзБржи ржЕржЯрзЛржорзЗрж╢ржи ржмрж╛ ржЕрзНржпрж╛рж▓рж╛рж░рзНржЯ рждрзИрж░рж┐ ржХрж░рзБржи</h2>
          <i class="fas fa-cog path-config-icon" title="Path Configuration" onclick="openPathSelector('automation_rules', event)"></i>
        </div>
        <div class="rule-builder-card">
          <form class="rule-builder-form" onsubmit="saveAutomationRule(event)" id="automation-rule-form">
            <div class="form-group"><label for="rule-name">рж░рзБрж▓рзЗрж░ ржирж╛ржо</label><input type="text" id="rule-name" placeholder="ржпрзЗржоржи: рж╕ржирзНржзрзНржпрж╛ржпрж╝ рж▓рж╛ржЗржЯ ржЕржи" required></div>
            <div class="rule-condition-box">
              <div class="rule-part if-part">IF (ржпржжрж┐)</div>
              <div class="form-group"><label for="trigger-source">ржЯрзНрж░рж┐ржЧрж╛рж░рзЗрж░ ржЙрзОрж╕</label><select id="trigger-source" onchange="updateTriggerOptions()"><option value="energy">ржПржирж╛рж░рзНржЬрж┐ ржоржирж┐ржЯрж░</option><option value="time">рж╕ржоржпрж╝</option><option value="device">ржЕржирзНржп ржбрж┐ржнрж╛ржЗрж╕</option></select></div>
              <div id="trigger-options-container"></div>
            </div>
            <div class="rule-action-box">
              <div class="rule-part then-part">THEN (рждржмрзЗ)</div>
              <div class="form-group"><label for="action-device">ржбрж┐ржнрж╛ржЗрж╕</label><select id="action-device"></select></div>
              <div class="form-group"><label for="action-relay">рж░рж┐рж▓рзЗ/рж▓рзЛржб</label><select id="action-relay"></select></div>
              <div class="form-group"><label for="action-state">ржЕрзНржпрж╛ржХрж╢ржи</label><select id="action-state"><option value="true">ON ржХрж░рзБржи</option><option value="false">OFF ржХрж░рзБржи</option></select></div>
            </div>
            <div class="notification-toggle-group"><input type="checkbox" id="send-notification-checkbox" style="width: auto;"><label for="send-notification-checkbox">ржПрж░ рж╕рж╛ржерзЗ ржПржХржЯрж┐ ржирзЛржЯрж┐ржлрж┐ржХрзЗрж╢ржи ржкрж╛ржарж╛ржи</label></div>
            <div class="form-group" id="notification-message-group" style="display: none;"><label for="notification-message">ржирзЛржЯрж┐ржлрж┐ржХрзЗрж╢ржи ржмрж╛рж░рзНрждрж╛</label><textarea id="notification-message" placeholder="ржЖржкржирж╛рж░ ржХрж╛рж╕рзНржЯржо ржмрж╛рж░рзНрждрж╛ ржПржЦрж╛ржирзЗ рж▓рж┐ржЦрзБржи..."></textarea></div>
            <div style="display: flex; gap: 10px; margin-top: 15px;">
                <button type="submit" class="pro-btn btn-on" style="flex: 1;">ЁЯТ╛ рж░рзБрж▓ рж╕ржВрж░ржХрзНрж╖ржг ржХрж░рзБржи</button>
                <button type="button" class="pro-btn cancel-btn" onclick="cancelEditAutomation()" style="display: none;" id="cancel-automation-edit-btn">ржмрж╛рждрж┐рж▓</button>
            </div>
          </form>
        </div>
      </div>
      <div class="automation-container">
        <h2 class="section-title">рж╕ржХрзНрж░рж┐ржпрж╝ ржЕржЯрзЛржорзЗрж╢ржи ржУ ржЕрзНржпрж╛рж▓рж╛рж░рзНржЯ рж╕ржорзВрж╣</h2>
        <div class="rule-list" id="automation-rule-list"><p>ржХрзЛржирзЛ ржЕржЯрзЛржорзЗрж╢ржи рж░рзБрж▓ ржПржЦржирзЛ рждрзИрж░рж┐ ржХрж░рж╛ рж╣ржпрж╝ржирж┐ред</p></div>
      </div>
    </div>
  </main>

  <!-- ржЕржбрж┐ржЯ рж▓ржЧ ржкрзЗржЗржЬ -->
  <main id="page10" class="device-page">
    <section class="audit-log-container" id="page-component-audit-log" data-component-id="audit_log">
      <div class="section-header">
        <h2 class="section-title">рж╕ржорзНржкрзВрж░рзНржг ржХрж╛рж░рзНржпржХрж▓рж╛ржкрзЗрж░ рж▓ржЧ</h2>
        <i class="fas fa-cog path-config-icon" title="Path Configuration" onclick="openPathSelector('audit_log', event)"></i>
      </div>
      <div class="audit-log-list" id="audit-log-list"><p>ржХрзЛржирзЛ ржХрж╛рж░рзНржпржХрж▓рж╛ржкрзЗрж░ рж▓ржЧ ржкрж╛ржУрзЯрж╛ ржпрж╛рзЯржирж┐...</p></div>
    </section>
  </main>

  <!-- рж╕рж┐рж╕рзНржЯрзЗржо рж╕рзНржЯрзНржпрж╛ржЯрж╛рж╕ ржкрзЗржЗржЬ -->
  <main id="page11" class="device-page">
    <section class="status-dashboard" id="page-component-system-status" data-component-id="system_status">
      <div class="section-header">
        <h2 class="section-title">рж╕рж┐рж╕рзНржЯрзЗржо ржбрж╛ржпрж╝рж╛ржЧржирж╕рзНржЯрж┐ржХрзНрж╕ ржбрзНржпрж╛рж╢ржмрзЛрж░рзНржб</h2>
        <i class="fas fa-cog path-config-icon" title="Path Configuration" onclick="openPathSelector('system_status', event)"></i>
      </div>
      <div class="status-dashboard-grid">
        <div class="status-card"><div class="status-card-title"><i class="fas fa-wifi"></i> WiFi ржХрж╛ржирзЗржХрж╢ржи</div><div class="status-card-value" id="status-wifi">ржЕржЬрж╛ржирж╛</div><div class="status-indicator" id="indicator-wifi"></div></div>
        <div class="status-card"><div class="status-card-title"><i class="fas fa-cloud"></i> Firebase ржХрж╛ржирзЗржХрж╢ржи</div><div class="status-card-value" id="status-firebase">ржЕржЬрж╛ржирж╛</div><div class="status-indicator" id="indicator-firebase"></div></div>
        <div class="status-card"><div class="status-card-title"><i class="fas fa-microchip"></i> Mega ржХрж╛ржирзЗржХрж╢ржи</div><div class="status-card-value" id="status-mega">ржЕржЬрж╛ржирж╛</div><div class="status-indicator" id="indicator-mega"></div></div>
        <div class="status-card"><div class="status-card-title"><i class="fas fa-power-off"></i> рж╕рж┐рж╕рзНржЯрзЗржо ржЖржкржЯрж╛ржЗржо</div><div class="status-card-value" id="status-uptime">--</div></div>
        <div class="status-card"><div class="status-card-title"><i class="fas fa-sd-card"></i> SD ржХрж╛рж░рзНржб рж╕рзНржЯрзНржпрж╛ржЯрж╛рж╕</div><div class="status-card-value" id="status-sd-card">ржЕржЬрж╛ржирж╛</div><div class="status-indicator" id="indicator-sd-card"></div></div>
        <div class="status-card"><div class="status-card-title"><i class="fas fa-memory"></i> рж░тАНрзНржпрж╛ржо ржмрзНржпржмрж╣рж╛рж░</div><div class="status-card-value" id="status-ram-usage">--%</div><div class="ram-progress-bar"><div class="ram-progress-fill" id="ram-progress-fill"></div></div></div>
      </div>
    </section>
  </main>

  <!-- рж▓ржЬрж┐ржХ ржЧрзЗржЯ ржЗржирзНржЯрж╛рж░рж▓ржХ ржкрзЗржЬ -->
  <main id="page12" class="device-page" data-component-id="logic_gate_rules">
    <div class="automation-grid">
        <div class="automation-container">
            <div class="section-header">
                <h2 class="section-title">ржирждрзБржи рж▓ржЬрж┐ржХ ржЧрзЗржЯ рж░рзБрж▓ рждрзИрж░рж┐ ржХрж░рзБржи</h2>
                <i class="fas fa-cog path-config-icon" title="Path Configuration" onclick="openPathSelector('logic_gate_rules', event)"></i>
            </div>
            <div class="rule-builder-card">
                <form class="rule-builder-form" onsubmit="saveLogicGateRule(event)" id="logic-gate-form">
                    <div class="form-group">
                        <label for="logic-rule-name">рж░рзБрж▓рзЗрж░ ржирж╛ржо</label>
                        <input type="text" id="logic-rule-name" placeholder="ржпрзЗржоржи: ржкрж╛ржорзНржк рж╕рзЗржлржЯрж┐ ржЗржирзНржЯрж╛рж░рж▓ржХ" required>
                    </div>
                    <div class="logic-equation-builder">
                        <!-- INPUTS COLUMN -->
                        <div class="logic-column logic-inputs-column">
                            <div class="rule-part if-part">ржЗржиржкрзБржЯ</div>
                            <div id="logic-inputs-list">
                                <!-- ржЗржиржкрзБржЯ ржЧрзНрж░рзБржкржЧрзБрж▓рзЛ ржПржЦрж╛ржирзЗ ржбрж╛ржЗржирж╛ржорж┐ржХржнрж╛ржмрзЗ ржпрзБржХрзНржд рж╣ржмрзЗ -->
                            </div>
                            <button type="button" class="pro-btn btn-info add-logic-input-btn" onclick="addLogicInput()">
                                <i class="fas fa-plus"></i> ржирждрзБржи ржЗржиржкрзБржЯ ржпрзЛржЧ ржХрж░рзБржи
                            </button>
                        </div>
                
                        <!-- GATE COLUMN -->
                        <div class="logic-column logic-gate-column">
                            <div class="form-group gate-selector">
                                <label for="logic-gate-type">рж▓ржЬрж┐ржХ ржЧрзЗржЯ</label>
                                <select id="logic-gate-type">
                                    <option value="AND">AND</option>
                                    <option value="OR">OR</option>
                                    <option value="NAND">NAND</option>
                                    <option value="NOR">NOR</option>
                                    <option value="XOR">XOR</option>
                                    <option value="XNOR">XNOR</option>
                                </select>
                            </div>
                        </div>
                
                        <!-- OUTPUT COLUMN -->
                        <div class="logic-column logic-output-column">
                            <div class="rule-part then-part">ржЖржЙржЯржкрзБржЯ</div>
                            <div class="form-group">
                                <label for="logic-output-device">ржЖржЙржЯржкрзБржЯ ржбрж┐ржнрж╛ржЗрж╕</label>
                                <select id="logic-output-device"></select>
                            </div>
                            <div class="form-group">
                                <label for="logic-output-relay">ржЖржЙржЯржкрзБржЯ рж░рж┐рж▓рзЗ</label>
                                <select id="logic-output-relay"></select>
                            </div>
                            <div class="form-group">
                                <label for="logic-output-state">ржЕрзНржпрж╛ржХрж╢ржи</label>
                                <select id="logic-output-state">
                                    <option value="true">ON ржХрж░рзБржи</option>
                                    <option value="false">OFF ржХрж░рзБржи</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div style="display: flex; gap: 10px; margin-top: 15px;">
                        <button type="submit" class="pro-btn btn-on" style="flex: 1;">ЁЯТ╛ рж░рзБрж▓ рж╕ржВрж░ржХрзНрж╖ржг ржХрж░рзБржи</button>
                        <button type="button" class="pro-btn cancel-btn" onclick="cancelEditLogicGate()" style="display: none;" id="cancel-logic-edit-btn">ржмрж╛рждрж┐рж▓</button>
                    </div>
                </form>
            </div>
        </div>
        <div class="automation-container">
            <h2 class="section-title">рж╕ржХрзНрж░рж┐ржпрж╝ ржЗржирзНржЯрж╛рж░рж▓ржХ рж░рзБрж▓ рж╕ржорзВрж╣</h2>
            <div class="rule-list" id="logic-gate-rule-list"><p>ржХрзЛржирзЛ ржЗржирзНржЯрж╛рж░рж▓ржХ рж░рзБрж▓ ржПржЦржирзЛ рждрзИрж░рж┐ ржХрж░рж╛ рж╣ржпрж╝ржирж┐ред</p></div>
        </div>
    </div>
  </main>

  <!-- рждрж╛ржкржорж╛рждрзНрж░рж╛ ржоржирж┐ржЯрж░ ржкрзЗржЬ -->
  <main id="page13" class="device-page" data-component-id="temperature_data">
    <div class="section-header">
        <h2 class="section-title">рждрж╛ржкржорж╛рждрзНрж░рж╛ ржоржирж┐ржЯрж░рж┐ржВ ржбрзНржпрж╛рж╢ржмрзЛрж░рзНржб</h2>
        <i class="fas fa-cog path-config-icon" title="Path Configuration" onclick="openPathSelector('temperature_data', event)"></i>
    </div>
    <div class="temperature-page-grid" id="temperature-sensors-container"></div>
    <div class="add-new-btn-container"><button class="pro-btn btn-info" onclick="addNewTemperatureSensor()" style="width: 100%; padding: 12px; font-size: 1rem;"><i class="fas fa-plus-circle"></i> ржирждрзБржи рж╕рзЗржирзНрж╕рж░ ржпрзЛржЧ ржХрж░рзБржи</button></div>
  </main>

  <!-- ржХрж╛рж╕рзНржЯржо ржкрзЗржЬржЧрзБрж▓рзЛрж░ ржЬржирзНржп ржХржирзНржЯрзЗржЗржирж╛рж░ -->
  <div id="dynamic-pages-container"></div>
</div>

<!-- ржЯрзЛрж╕рзНржЯ ржирзЛржЯрж┐ржлрж┐ржХрзЗрж╢ржи ржХржирзНржЯрзЗржЗржирж╛рж░ -->
<div class="toast-container" id="toast-container"></div>

<!-- ржЗржорзЗржЬ ржнрж┐ржЙрзЯрж╛рж░ ржорзЛржбрж╛рж▓ -->
<div id="imageModal" class="image-modal">
  <span class="close-modal" onclick="closeImageModal()">&times;</span>
  <div class="modal-content"><img id="modalImage" class="modal-image" src="" alt=""><div id="modalCaption" class="modal-caption"></div></div>
</div>

<!-- рж░рж┐рж▓рзЗ ржкрж╛рж╕ржУржпрж╝рж╛рж░рзНржб ржнрзЗрж░рж┐ржлрж┐ржХрзЗрж╢ржи ржорзЛржбрж╛рж▓ -->
<div id="relayPasswordModal" class="password-modal-container">
  <div class="password-modal-box"><h3>ржЕржкрж╛рж░рзЗрж╢ржи ржирж┐рж╢рзНржЪрж┐ржд ржХрж░рзБржи</h3><p>ржПржЗ рж░рж┐рж▓рзЗржЯрж┐ ржЕржкрж╛рж░рзЗржЯ ржХрж░рждрзЗ ржжржпрж╝рж╛ ржХрж░рзЗ ржкрж╛рж╕ржУржпрж╝рж╛рж░рзНржб ржжрж┐ржиред</p><div class="password-input-group"><input type="password" id="relayPasswordInput" placeholder="ржЕржкрж╛рж░рзЗржЯрж┐ржВ ржкрж╛рж╕ржУржпрж╝рж╛рж░рзНржб" autocomplete="off"></div><div class="password-error-message" id="relayPasswordError"></div><div class="password-modal-buttons"><button class="pro-btn modal-btn cancel-btn" onclick="cancelRelayOperation()">ржмрж╛рждрж┐рж▓</button><button class="pro-btn modal-btn confirm-btn" onclick="verifyAndOperateRelay()">ржирж┐рж╢рзНржЪрж┐ржд ржХрж░рзБржи</button></div></div>
</div>

<!-- рж╕рж╛ржзрж╛рж░ржг ржЕрзНржпрж╛ржХрж╢ржи ржкрж╛рж╕ржУржпрж╝рж╛рж░рзНржб ржорзЛржбрж╛рж▓ -->
<div id="actionPasswordModal" class="password-modal-container">
  <div class="password-modal-box"><h3 id="action-modal-title">ржЕрзНржпрж╛ржХрж╢ржи ржирж┐рж╢рзНржЪрж┐ржд ржХрж░рзБржи</h3><p id="action-modal-description">ржПржЗ ржХрж╛ржЬржЯрж┐ рж╕ржорзНржкржирзНржи ржХрж░рждрзЗ ржЖржкржирж╛рж░ ржЕржкрж╛рж░рзЗржЯрж┐ржВ ржкрж╛рж╕ржУржпрж╝рж╛рж░рзНржб ржжрж┐ржиред</p><div class="password-input-group"><input type="password" id="actionPasswordInput" placeholder="ржЕржкрж╛рж░рзЗржЯрж┐ржВ ржкрж╛рж╕ржУржпрж╝рж╛рж░рзНржб" autocomplete="off"></div><div class="password-error-message" id="actionPasswordError"></div><div class="password-modal-buttons"><button class="pro-btn modal-btn cancel-btn" onclick="cancelAction()">ржмрж╛рждрж┐рж▓</button><button class="pro-btn modal-btn confirm-btn" onclick="verifyAndExecuteAction()">ржирж┐рж╢рзНржЪрж┐ржд ржХрж░рзБржи</button></div></div>
</div>

<!-- рж░рзЗржЬрж┐рж╕рзНржЯрзНрж░рзЗрж╢ржи рж╕рж┐ржХрж┐ржЙрж░рж┐ржЯрж┐ ржорзЛржбрж╛рж▓ -->
<div id="registrationSecurityModal" class="password-modal-container">
  <div class="password-modal-box">
    <h3>ржЕрзНржпрж╛ржбржорж┐ржи ржнрзЗрж░рж┐ржлрж┐ржХрзЗрж╢ржи</h3>
    <p>ржирждрзБржи ржПржХрж╛ржЙржирзНржЯ рждрзИрж░рж┐ ржХрж░рждрзЗ ржЕрзНржпрж╛ржбржорж┐ржи ржкрж╛рж╕ржУржпрж╝рж╛рж░рзНржб ржжрж┐ржиред</p>
    <div class="password-input-group">
      <input type="password" id="regSecurityInput" placeholder="ржкрж╛рж╕ржУржпрж╝рж╛рж░рзНржб рж▓рж┐ржЦрзБржи" autocomplete="off">
    </div>
    <div class="password-error-message" id="regSecurityError"></div>
    <div class="password-modal-buttons">
      <button class="pro-btn modal-btn cancel-btn" onclick="closeRegistrationSecurityModal()">ржмрж╛рждрж┐рж▓</button>
      <button class="pro-btn modal-btn confirm-btn" onclick="checkRegistrationSecurity()">ржирж┐рж╢рзНржЪрж┐ржд ржХрж░рзБржи</button>
    </div>
  </div>
</div>

<!-- ржЯрж╛ржЗржорж╛рж░ рж╕рзЗржЯрж┐ржВ ржорзЛржбрж╛рж▓ -->
<div id="timerModal" class="password-modal-container">
  <div class="timer-modal-box"><h3 id="timer-modal-title">ржЯрж╛ржЗржорж╛рж░ рж╕рзЗржЯрж┐ржВрж╕</h3><div class="timer-form"><div class="timer-row"><label>ржЯрж╛ржЗржорж╛рж░ рж╕рзНржЯрзНржпрж╛ржЯрж╛рж╕</label><button id="timer-enabled-btn" class="modal-btn disabled" onclick="toggleTimerEnabled()">ржирж┐рж╖рзНржХрзНрж░рж┐рзЯ</button></div><div class="timer-row"><label for="timer-online-time">ржЕржирж▓рж╛ржЗржи рж╣ржУрзЯрж╛рж░ рж╕ржорзЯ</label><input type="time" id="timer-online-time" class="timer-time-input" step="1"></div><div class="timer-row"><label for="timer-offline-time">ржЕржлрж▓рж╛ржЗржи рж╣ржУрзЯрж╛рж░ рж╕ржорзЯ</label><input type="time" id="timer-offline-time" class="timer-time-input" step="1"></div><div class="timer-row" style="display:none;"><label for="timer-relay-select">ржХрзЛржи рж░рж┐рж▓рзЗ ржХржирзНржЯрзНрж░рзЛрж▓ рж╣ржмрзЗ?</label><select id="timer-relay-select" class="timer-select"></select></div></div><p class="timer-note">ржкрж░рж┐ржмрж░рзНрждржиржЧрзБрж▓рзЛ рж╕ржВрж░ржХрзНрж╖ржг ржХрж░рждрзЗ ржЖржкржирж╛рж░ ржЕржкрж╛рж░рзЗржЯрж┐ржВ ржкрж╛рж╕ржУржпрж╝рж╛рж░рзНржб ржкрзНрж░ржпрж╝рзЛржЬржи рж╣ржмрзЗред</p><div class="password-input-group"><input type="password" id="timerPasswordInput" placeholder="ржЕржкрж╛рж░рзЗржЯрж┐ржВ ржкрж╛рж╕ржУржпрж╝рж╛рж░рзНржб" autocomplete="off"></div><div class="password-error-message" id="timerPasswordError"></div><div class="password-modal-buttons"><button class="pro-btn modal-btn cancel-btn" onclick="closeTimerModal()">ржмрж╛рждрж┐рж▓</button><button class="pro-btn modal-btn confirm-btn" onclick="saveTimerSettings()">рж╕ржВрж░ржХрзНрж╖ржг ржХрж░рзБржи</button></div></div>
</div>

<!-- ржжрзГрж╢рзНржп (Scene) рждрзИрж░рж┐рж░ ржорзЛржбрж╛рж▓ -->
<div id="sceneModal" class="password-modal-container">
  <div class="scene-modal-box"><h3>ржирждрзБржи ржжрзГрж╢рзНржп рждрзИрж░рж┐ ржХрж░рзБржи</h3><div class="form-group" style="text-align: left;"><label for="scene-name">ржжрзГрж╢рзНржпрзЗрж░ ржирж╛ржо</label><input type="text" id="scene-name" placeholder="ржпрзЗржоржи: ржЧрзБржб ржирж╛ржЗржЯ" style="width: 100%;"></div><div class="scene-relay-list" id="scene-relay-list-container"></div><div class="password-error-message" id="scene-error-message"></div><div class="password-modal-buttons"><button class="pro-btn modal-btn cancel-btn" onclick="closeSceneModal()">ржмрж╛рждрж┐рж▓</button><button class="pro-btn modal-btn confirm-btn" onclick="saveScene()">рж╕ржВрж░ржХрзНрж╖ржг ржХрж░рзБржи</button></div></div>
</div>

<!-- ржирждрзБржи ржкрзЗржЬ рждрзИрж░рж┐рж░ ржорзЛржбрж╛рж▓ -->
<div id="addPageModal" class="password-modal-container">
  <div class="password-modal-box"><h3>ржирждрзБржи ржХрж╛рж╕рзНржЯржо ржкрзЗржЬ рждрзИрж░рж┐ ржХрж░рзБржи</h3><p>ржЖржкржирж╛рж░ ржирждрзБржи ржбрзНржпрж╛рж╢ржмрзЛрж░рзНржб ржкрзЗржЬрзЗрж░ ржЬржирзНржп ржПржХржЯрж┐ ржирж╛ржо ржПржмржВ ржЕржкрж╛рж░рзЗржЯрж┐ржВ ржкрж╛рж╕ржУржпрж╝рж╛рж░рзНржб ржжрж┐ржиред</p><div class="form-group" style="text-align: left; margin-bottom: 1.5rem;"><label for="new-page-name">ржкрзЗржЬрзЗрж░ ржирж╛ржо</label><input type="text" id="new-page-name" placeholder="ржпрзЗржоржи: ржЖржорж╛рж░ ржХржирзНржЯрзНрж░рзЛрж▓ рж░рзБржо" style="width: 100%;"></div><div class="password-input-group"><input type="password" id="addPagePasswordInput" placeholder="ржЕржкрж╛рж░рзЗржЯрж┐ржВ ржкрж╛рж╕ржУржпрж╝рж╛рж░рзНржб" autocomplete="off" style="width: 100%;"></div><div class="password-error-message" id="add-page-error"></div><div class="password-modal-buttons"><button class="pro-btn modal-btn cancel-btn" onclick="closeAddPageModal()">ржмрж╛рждрж┐рж▓</button><button class="pro-btn modal-btn confirm-btn" onclick="saveNewPage()">рж╕ржВрж░ржХрзНрж╖ржг ржХрж░рзБржи</button></div></div>
</div>

<!-- ржкрзЗржЬ ржПржбрж┐ржЯрж░ ржорзЛржбрж╛рж▓ -->
<div id="pageEditorModal" class="password-modal-container">
  <div class="scene-modal-box" style="width: 80%; max-width: 900px; border-top-color: var(--info-color);"><h3 id="page-editor-title">ржкрзЗржЬ ржХржирзНржЯрзЗржирзНржЯ ржПржбрж┐ржЯ ржХрж░рзБржи</h3><div id="page-editor-content" style="max-height: 60vh; overflow-y: auto; text-align: left; padding: 15px;"></div><div class="password-modal-buttons" style="margin-top: 20px;"><button class="pro-btn modal-btn cancel-btn" onclick="closePageEditorModal()">ржмрж╛рждрж┐рж▓</button><button class="pro-btn modal-btn confirm-btn" onclick="savePageComponents()">ржкрзЗржЬ рж╕ржВрж░ржХрзНрж╖ржг ржХрж░рзБржи</button></div></div>
</div>

<!-- ржкрж╛рже рж╕рж┐рж▓рзЗржХрж╢ржи ржкржкржУржнрж╛рж░ -->
<div id="path-selector-popover">
  <h4>Path Configuration</h4>
  <div id="path-segments-container">
    <!-- Cascading dropdowns will be inserted here -->
  </div>
  <button class="pro-btn confirm-btn" onclick="savePathMapping()">рж╕ржВрж░ржХрзНрж╖ржг ржХрж░рзБржи</button>
  <button class="pro-btn cancel-btn" onclick="closePathSelector()">ржмрж╛рждрж┐рж▓</button>
</div>


<!-- ржирзЛржЯрж┐ржлрж┐ржХрзЗрж╢ржи рж╕рж╛ржЙржирзНржбрзЗрж░ ржЬржирзНржп ржЕржбрж┐ржУ ржПрж▓рж┐ржорзЗржирзНржЯ -->
<audio id="notification-sound" preload="auto">
  <source src="notification.mp3" type="audio/mpeg">
  ржЖржкржирж╛рж░ ржмрзНрж░рж╛ржЙржЬрж╛рж░ ржЕржбрж┐ржУ рж╕ржорж░рзНржержи ржХрж░рзЗ ржирж╛ред
</audio>

<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-messaging-compat.js"></script>

<!-- Main Script File -->
<script src="script.js" defer></script>

</body>
</html>